
<!doctype html>

<html>

<head>

<meta charset="utf-8">

<title>KPIs</title>

</head>

<body>

<button id="load">Load KPIs</button>

<pre id="out">Click "Load KPIs"</pre>

<script>

document.getElementById('load').addEventListener('click', async () => {

const out = document.getElementById('out');

out.textContent = "Loading...";

try {

const res = await fetch('/.netlify/functions/proxy-kpi');

const data = await res.json();

// Print a simple list

// paidVsBudget and deliverablesProgress are 0..1; show both raw and %.

const k = data.kpis || {};

const lines = [

"paidVsBudget (raw): " + (k.paidVsBudget ?? 0),

"paidVsBudget (%): " + ((k.paidVsBudget ?? 0) * 100).toFixed(2) + "%",

"deliverablesProgress (raw): " + (k.deliverablesProgress ?? 0),

"deliverablesProgress (%): " + ((k.deliverablesProgress ?? 0) * 100).toFixed(0) + "%",

"overBudgetCount: " + (k.overBudgetCount ?? 0),

"daysToLaunch: " + (k.daysToLaunch ?? 0)

];

out.textContent = lines.join("n");

} catch (e) {

out.textContent = "Error: " + e.message;

}

});

</script>

</body>

</html>

